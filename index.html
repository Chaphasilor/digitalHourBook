<!DOCTYPE html>
<html lang='en' dir='ltr'>
  <head>
    
    <meta charset='utf-8'>
    
    <title>Digital Hour Book</title>
    
    <link rel='stylesheet' href='style.css'>
    <script type='text/javascript' src='script.js'>
      
    </script>
    
  </head>
  <body>
    
    <div id='overtime'>
      <span>+5</span>
    </div>
    
    <button id='addWorkingHours' type='button' onclick="newEntry();">Add hours</button>
      
    <form id='hoursEntry' action='' onsubmit="event.preventDefault();addDay(this.getElementsByTagName('input')[0].value, this.getElementsByTagName('input')[1].value);">
      
      <input type='date' name='date' value="" />
      
      <input type='text' name='amount' value='4' />
      
      <input type='submit' value='Submit' />
    
    </form>
      
    <script type="text/javascript">
      
      window.onload = function() {
        
        document.querySelector('#hoursEntry').querySelector("input[type='date']").value = new Date().toDateInputValue();
        
        initDB().then(function(response) {
          
          console.log(response);
          
          calculateOvertime().then(function(overtime) {
            
            let overtimeSpan = document.querySelector('#overtime').querySelector('span');
            overtimeSpan.innerHTML = overtime;
            
            overtime<0 ? overtimeSpan.style.color = 'red' : overtimeSpan.style.color = 'green';
            
          });
          
        })
        
      }
      
    </script>
      
  </body>
</html>